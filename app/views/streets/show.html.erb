<p id="notice"><%= notice %></p>
<% provide(:title, @street.prevName) %>
<h1>Historic Street Name</h1>

  <div class="row">
    <div class="col-4">
      <% if @street.city != "Los Angeles" %>
        <p>
          <strong>City:</strong>
          <%= @street.city %>
        </p>
      <% end %>
      
      <p>
        <strong>Previous Street Name:</strong>
        <%= @street.prevName %>
      </p>

      <p>
        <strong>'Current/Next' Street Name:</strong>
        <%= @street.currentName %>
      </p>

      <p>
        <strong>Earliest Date for 'Previous' Name:</strong>
        <%= @street.dateEarliest %>
      </p>

      <p>
        <strong>Latest Date for 'Previous' Name:</strong>
        <%= @street.dateLatest %>
      </p>

      <p>
        <strong>Entry covers from cross street to cross street or similar:</strong>
        <%= @street.where %>
      </p>

      <p>
        <strong>Extent as JSON:</strong>
        <%= @street.extent_json %>
      </p>

      <p>
        <strong>Extent as Coordinate Array:</strong>
        <%= @street.extent_array %>
      </p>

      <p>
        <strong>Approximate Number of Blocks:</strong>
        <%= @street.numBlocks %>
      </p>

      <p>
        <strong>Reference 1:</strong>
        <%= @street.ref1 %>
      </p>

      <p>
        <strong>Reference 2:</strong>
        <%= @street.ref2 %>
      </p>

      <p>
        <strong>Reference 3:</strong>
        <%= @street.ref3 %>
      </p>

      <p>
        <strong>Notes:</strong>
        <%= @street.notes %>
      </p>
      
  		<p>
  		  <strong>Updated:</strong>
  		  <%= @street.updated_at.to_formatted_s(:long) %>
  		</p>
    </div> <!-- end col-4 -->

    <div class="col">
      <p class="font-bold-red">If no map shows up when you choose a map, zoom out. But the map may not cover that region, so try another map.</p>
      <br/>
      <!-- <= render 'leafletmap_show' %> -->
      
      <div id="map"></div>
        <script>
          // showMap() is in assets/javascripts/streets.js 
             // var dateEarliest = <%= @street.dateEarliest %>;
             // var currentName  = "<%= @street.currentName %>";
             // var dateLatest   = <%= @street.dateLatest %>;
          var popupText = "&le;<%= @street.dateEarliest %><br><%= @street.prevName %><br>&ge;<%= @street.dateLatest %><br><%= @street.currentName %>";
          // $(document).on('ready page:load', function() { // have to reload to get page to show
          $(document).on('turbolinks:load', function() { // The turbolinks:load part may not be needed https://stackoverflow.com/questions/18770517/rails-4-how-to-use-document-ready-with-turbo-links
             showMap(popupText);
          });
        </script>

    </div>  <!-- col middle -->

    <!-- <div class="col-1">
      <  @maps.each do |map| %>
        <p>< = @map.name %></p>
      <  end %>
    </div> --><!-- end col-1 last -->

  </div> <!-- end row which is basically the page -->
  <% if logged_in? %>
    <button type="button" class="btn btn-primary-outline" >
      <%= link_to 'Edit', edit_street_path(@street) %>
    </button>
  <% end  %>

  <button type="button" class="btn btn-primary-outline" >
    <%= link_to 'Back to Street List', streets_path %> 
  </button>

  <% if logged_in? %>
    <button type="button" class="btn btn-primary-outline" >
      <%= link_to 'New Historic Street Entry', new_street_path %>
    </button>
  <% end  %>
