<p id="notice"><%= notice %></p>
<!-- <%= full_title(yield(:title)) %> -->
<% provide(:title, @street) %>
<h1>Historic Street Name Changes in Los Angeles</h1>

    <div class="col-sm">
      <% if logged_in? %>
        <button type="button" class="btn btn-outline-primary" >
          <%= link_to 'Add New Historic Street', new_street_path %>
        </button>
      <% end %>
    </div>

    <div class="col-sm"> <!-- Note that an if else is in this column and affects the rest of the page -->
      <% if @streets.blank? %>
      <br>
        <p class="font-bold-red">Nothing found. 
         <button type="button" class="btn btn-outline-primary" >
           <%= link_to 'Show All Streets', streets_path %>
         </button> or search again above.
         </p>
         <!-- Show the table of found. Or all streets TODO  -->
      <% else %> <!-- The end is near the bottom, so blank table won't be shown if nothing found. -->
    </div>

<!-- < = will_paginate %> Following Hartl  -->
  <!-- table table-striped table-hover table-responsive - - Losses vertical centering -->
  <table class="search-in-index streets pretty table table-striped table-hover table-responsive">
    <thead>
      <tr>
        <th>City if not LA</th>
        <th>Previous Name</th>
        <th>Earliest Date for Prev Name</th>
        <th>Current (Latest)</th>
        <th>Latest Date</th>
        <th>Cross Streets</th>
        <th>Approx. Number of Blocks</th> <!-- / miles -->
        <th>Section Drawn?</th>
        <th>Ref. 1</th>
        <th>Ref. 2</th>
        <th>Ref. 3</th>
        <th>Notes</th>
        <th colspan="3">Details</th>
      </tr>
    </thead>

    <tbody>
      <% for street in @streets %>
        <tr>
          <td><% if street.city != "Los Angeles" %><%= street.city %><% end %></td>
          <td><%= street.previous_name %></td>
          <td><%= street.date_earliest %></td>
          <td><%= street.current_name %></td>
          <td><%= street.date_latest %></td>
          <td><%= street.cross_streets %></td>
          <td><%= street.number_of_blocks %> </td>  <!-- / < = street.extent_length %> -->
          <% if street.extent_json? || street.extent_array? %>
            <td class="extent-yes">Yes</td>
          <% else %>
            <td class='extent-no'>No</td>
          <% end %>
          <td><%= street.ref1 %></td>
          <td><%= street.ref2 %></td>
          <td><%= street.ref3 %></td>
          <td><%= street.notes %></td>
          <td><%= link_to 'Show', street, class: "text-success" %></td>
          <% if logged_in? %>
            <td><%= link_to 'Edit', edit_street_path(street) %></td>
            <!-- <td/>< = link_to 'Duplicate', dup_street_path, action: "dup", data: { confirm: 'This will make a duplicate for editing into a new entry.'} %></tr> -->
            <td><%= link_to 'Destroy', street, class: "text-danger", method: :delete, data: { confirm: 'Are you sure?'} %></td>
          <% end %>
        </tr>
      <% end %> <!-- If no streets found in search, the table is hidden -->
    </tbody>
  </table>

  <!-- < = will_paginate %> -->

  <footer class="footer">
    <div class="container">
      <p>References</p>
      <p class="text-muted">Baist: Georeferenced against 1921 Baist Insurance maps to contemporary (~ 2017 Bing and OSM)</p>
      <p class="text-muted">* Morse:	http://stevemorse.org/census/changes/LosAngelesChanges2.htm</p>
      <p class="text-muted">** Morse: http://stevemorse.org/census/changes/LosAngelesChanges1.htm</p>
    </div>
  </footer>
  <% end %> <!-- if @streets.blank? -->
<br><br>
<% if logged_in? %>
  <button type="button" class="btn btn-outline-primary" >
    <%= link_to 'Add New Historic Street', new_street_path %>
  </button>
<% end %>
